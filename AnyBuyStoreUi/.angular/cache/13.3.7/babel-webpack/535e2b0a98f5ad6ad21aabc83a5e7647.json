{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\R9\\\\Desktop\\\\AnyBuyStoreAngularUi\\\\AnyBuyStoreUi\\\\AnyBuyStoreUi\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { ProductModel } from '../shared/models/product-model.model';\nimport { CartModel } from '../shared/models/cart-model.model';\nimport { DiscountModel } from '../shared/models/discount-model.model';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { GlobalConstants } from '../shared/global-constants.model';\nlet ProductsingleComponent = class ProductsingleComponent {\n  constructor(route, ProductService, CartService, authService, DiscountsService, router) {\n    this.route = route;\n    this.ProductService = ProductService;\n    this.CartService = CartService;\n    this.authService = authService;\n    this.DiscountsService = DiscountsService;\n    this.router = router;\n    this.ProductDetails = new ProductModel();\n    this.DiscountDetails = new DiscountModel();\n    this.actualProductPrice = 0;\n    this.submitted = false;\n    this.cartForm = new FormGroup({\n      quantity: new FormControl('')\n    });\n  }\n\n  getById(id) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this.ProductService.getById(id).subscribe( /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(function* (result) {\n          _this.ProductDetails = result;\n          yield _this.getDiscountFunction(result);\n          yield _this.actualPriceFunction(result, _this.DiscountDetails);\n        });\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    })();\n  }\n\n  createImgPath(serverpath) {\n    return GlobalConstants.apiURL + serverpath;\n  }\n\n  getDiscountFunction(result) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this2.DiscountsService.GetById(result.discountId).subscribe(res => {\n        _this2.DiscountDetails = res;\n      });\n    })();\n  }\n\n  actualPriceFunction(result, productDiscount) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      _this3.actualProductPrice = Number(result.price) + Number(productDiscount.value);\n    })();\n  }\n\n  onAddToCart(formValues) {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      _this4.submitted = true;\n\n      if (_this4.cartForm.invalid) {\n        return;\n      }\n\n      const formValue = Object.assign({}, formValues);\n      var productDetail = new InModel();\n      productDetail.In.quantity = formValue.quantity;\n      productDetail.In.productId = _this4.ProductDetails.id;\n      productDetail.In.userId = Number(localStorage.getItem('userId'));\n      productDetail.In.isAvailable = true;\n\n      _this4.CartService.add(productDetail).subscribe({\n        next: _ => {\n          document.getElementById(\"success-alert\").style.display = \"block\";\n          document.getElementById(\"danger-alert\").style.display = \"none\";\n          document.getElementById(\"success-alert\").innerHTML = \"added successfully\";\n\n          _this4.router.navigate(['/cart']);\n        },\n        error: err => {\n          document.getElementById(\"danger-alert\").style.display = \"block\";\n          document.getElementById(\"danger-alert\").innerHTML = \"something went wrong\";\n        }\n      });\n    })();\n  }\n\n  ngOnInit() {\n    this.route.paramMap.subscribe(params => {\n      var id = Number(params.get('id'));\n      this.getById(id);\n    });\n  }\n\n};\nProductsingleComponent = __decorate([Component({\n  selector: 'app-productsingle',\n  templateUrl: './productsingle.component.html',\n  styleUrls: ['./productsingle.component.css']\n})], ProductsingleComponent);\nexport { ProductsingleComponent };\n\nclass InModel {\n  constructor() {\n    this.In = new CartModel();\n  }\n\n}","map":{"version":3,"sources":["C:/Users/R9/Desktop/AnyBuyStoreAngularUi/AnyBuyStoreUi/AnyBuyStoreUi/src/app/productsingle/productsingle.component.ts"],"names":["__decorate","Component","ProductModel","CartModel","DiscountModel","FormControl","FormGroup","GlobalConstants","ProductsingleComponent","constructor","route","ProductService","CartService","authService","DiscountsService","router","ProductDetails","DiscountDetails","actualProductPrice","submitted","cartForm","quantity","getById","id","subscribe","result","getDiscountFunction","actualPriceFunction","createImgPath","serverpath","apiURL","GetById","discountId","res","productDiscount","Number","price","value","onAddToCart","formValues","invalid","formValue","Object","assign","productDetail","InModel","In","productId","userId","localStorage","getItem","isAvailable","add","next","_","document","getElementById","style","display","innerHTML","navigate","error","err","ngOnInit","paramMap","params","get","selector","templateUrl","styleUrls"],"mappings":";AAAA,SAASA,UAAT,QAA2B,OAA3B;AACA,SAASC,SAAT,QAA0B,eAA1B;AACA,SAASC,YAAT,QAA6B,sCAA7B;AACA,SAASC,SAAT,QAA0B,mCAA1B;AACA,SAASC,aAAT,QAA8B,uCAA9B;AACA,SAASC,WAAT,EAAsBC,SAAtB,QAAuC,gBAAvC;AACA,SAASC,eAAT,QAAgC,kCAAhC;AACA,IAAIC,sBAAsB,GAAG,MAAMA,sBAAN,CAA6B;AACtDC,EAAAA,WAAW,CAACC,KAAD,EAAQC,cAAR,EAAwBC,WAAxB,EAAqCC,WAArC,EAAkDC,gBAAlD,EAAoEC,MAApE,EAA4E;AACnF,SAAKL,KAAL,GAAaA,KAAb;AACA,SAAKC,cAAL,GAAsBA,cAAtB;AACA,SAAKC,WAAL,GAAmBA,WAAnB;AACA,SAAKC,WAAL,GAAmBA,WAAnB;AACA,SAAKC,gBAAL,GAAwBA,gBAAxB;AACA,SAAKC,MAAL,GAAcA,MAAd;AACA,SAAKC,cAAL,GAAsB,IAAId,YAAJ,EAAtB;AACA,SAAKe,eAAL,GAAuB,IAAIb,aAAJ,EAAvB;AACA,SAAKc,kBAAL,GAA0B,CAA1B;AACA,SAAKC,SAAL,GAAiB,KAAjB;AACA,SAAKC,QAAL,GAAgB,IAAId,SAAJ,CAAc;AAC1Be,MAAAA,QAAQ,EAAE,IAAIhB,WAAJ,CAAgB,EAAhB;AADgB,KAAd,CAAhB;AAGH;;AACKiB,EAAAA,OAAO,CAACC,EAAD,EAAK;AAAA;;AAAA;AACd,YAAM,KAAI,CAACZ,cAAL,CAAoBW,OAApB,CAA4BC,EAA5B,EAAgCC,SAAhC;AAAA,qCAA0C,WAAOC,MAAP,EAAkB;AAC9D,UAAA,KAAI,CAACT,cAAL,GAAsBS,MAAtB;AACA,gBAAM,KAAI,CAACC,mBAAL,CAAyBD,MAAzB,CAAN;AACA,gBAAM,KAAI,CAACE,mBAAL,CAAyBF,MAAzB,EAAiC,KAAI,CAACR,eAAtC,CAAN;AACH,SAJK;;AAAA;AAAA;AAAA;AAAA,UAAN;AADc;AAMjB;;AACDW,EAAAA,aAAa,CAACC,UAAD,EAAa;AACtB,WAAOtB,eAAe,CAACuB,MAAhB,GAAyBD,UAAhC;AACH;;AACKH,EAAAA,mBAAmB,CAACD,MAAD,EAAS;AAAA;;AAAA;AAC9B,YAAM,MAAI,CAACX,gBAAL,CAAsBiB,OAAtB,CAA8BN,MAAM,CAACO,UAArC,EAAiDR,SAAjD,CAA2DS,GAAG,IAAI;AACpE,QAAA,MAAI,CAAChB,eAAL,GAAuBgB,GAAvB;AACH,OAFK,CAAN;AAD8B;AAIjC;;AACKN,EAAAA,mBAAmB,CAACF,MAAD,EAASS,eAAT,EAA0B;AAAA;;AAAA;AAC/C,MAAA,MAAI,CAAChB,kBAAL,GAA0BiB,MAAM,CAACV,MAAM,CAACW,KAAR,CAAN,GAAuBD,MAAM,CAACD,eAAe,CAACG,KAAjB,CAAvD;AAD+C;AAElD;;AACKC,EAAAA,WAAW,CAACC,UAAD,EAAa;AAAA;;AAAA;AAC1B,MAAA,MAAI,CAACpB,SAAL,GAAiB,IAAjB;;AACA,UAAI,MAAI,CAACC,QAAL,CAAcoB,OAAlB,EAA2B;AACvB;AACH;;AACD,YAAMC,SAAS,GAAGC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBJ,UAAlB,CAAlB;AACA,UAAIK,aAAa,GAAG,IAAIC,OAAJ,EAApB;AACAD,MAAAA,aAAa,CAACE,EAAd,CAAiBzB,QAAjB,GAA4BoB,SAAS,CAACpB,QAAtC;AACAuB,MAAAA,aAAa,CAACE,EAAd,CAAiBC,SAAjB,GAA6B,MAAI,CAAC/B,cAAL,CAAoBO,EAAjD;AACAqB,MAAAA,aAAa,CAACE,EAAd,CAAiBE,MAAjB,GAA0Bb,MAAM,CAACc,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAD,CAAhC;AACAN,MAAAA,aAAa,CAACE,EAAd,CAAiBK,WAAjB,GAA+B,IAA/B;;AACA,MAAA,MAAI,CAACvC,WAAL,CAAiBwC,GAAjB,CAAqBR,aAArB,EAAoCpB,SAApC,CAA8C;AAC1C6B,QAAAA,IAAI,EAAGC,CAAD,IAAO;AACTC,UAAAA,QAAQ,CAACC,cAAT,CAAwB,eAAxB,EAAyCC,KAAzC,CAA+CC,OAA/C,GAAyD,OAAzD;AACAH,UAAAA,QAAQ,CAACC,cAAT,CAAwB,cAAxB,EAAwCC,KAAxC,CAA8CC,OAA9C,GAAwD,MAAxD;AACAH,UAAAA,QAAQ,CAACC,cAAT,CAAwB,eAAxB,EAAyCG,SAAzC,GAAqD,oBAArD;;AACA,UAAA,MAAI,CAAC5C,MAAL,CAAY6C,QAAZ,CAAqB,CAAC,OAAD,CAArB;AACH,SANyC;AAO1CC,QAAAA,KAAK,EAAGC,GAAD,IAAS;AACZP,UAAAA,QAAQ,CAACC,cAAT,CAAwB,cAAxB,EAAwCC,KAAxC,CAA8CC,OAA9C,GAAwD,OAAxD;AACAH,UAAAA,QAAQ,CAACC,cAAT,CAAwB,cAAxB,EAAwCG,SAAxC,GAAoD,sBAApD;AACH;AAVyC,OAA9C;AAX0B;AAuB7B;;AACDI,EAAAA,QAAQ,GAAG;AACP,SAAKrD,KAAL,CAAWsD,QAAX,CAAoBxC,SAApB,CAA8ByC,MAAM,IAAI;AACpC,UAAI1C,EAAE,GAAGY,MAAM,CAAC8B,MAAM,CAACC,GAAP,CAAW,IAAX,CAAD,CAAf;AACA,WAAK5C,OAAL,CAAaC,EAAb;AACH,KAHD;AAIH;;AA/DqD,CAA1D;AAiEAf,sBAAsB,GAAGR,UAAU,CAAC,CAChCC,SAAS,CAAC;AACNkE,EAAAA,QAAQ,EAAE,mBADJ;AAENC,EAAAA,WAAW,EAAE,gCAFP;AAGNC,EAAAA,SAAS,EAAE,CAAC,+BAAD;AAHL,CAAD,CADuB,CAAD,EAMhC7D,sBANgC,CAAnC;AAOA,SAASA,sBAAT;;AACA,MAAMqC,OAAN,CAAc;AACVpC,EAAAA,WAAW,GAAG;AACV,SAAKqC,EAAL,GAAU,IAAI3C,SAAJ,EAAV;AACH;;AAHS","sourcesContent":["import { __decorate } from \"tslib\";\r\nimport { Component } from '@angular/core';\r\nimport { ProductModel } from '../shared/models/product-model.model';\r\nimport { CartModel } from '../shared/models/cart-model.model';\r\nimport { DiscountModel } from '../shared/models/discount-model.model';\r\nimport { FormControl, FormGroup } from '@angular/forms';\r\nimport { GlobalConstants } from '../shared/global-constants.model';\r\nlet ProductsingleComponent = class ProductsingleComponent {\r\n    constructor(route, ProductService, CartService, authService, DiscountsService, router) {\r\n        this.route = route;\r\n        this.ProductService = ProductService;\r\n        this.CartService = CartService;\r\n        this.authService = authService;\r\n        this.DiscountsService = DiscountsService;\r\n        this.router = router;\r\n        this.ProductDetails = new ProductModel();\r\n        this.DiscountDetails = new DiscountModel();\r\n        this.actualProductPrice = 0;\r\n        this.submitted = false;\r\n        this.cartForm = new FormGroup({\r\n            quantity: new FormControl(''),\r\n        });\r\n    }\r\n    async getById(id) {\r\n        await this.ProductService.getById(id).subscribe(async (result) => {\r\n            this.ProductDetails = result;\r\n            await this.getDiscountFunction(result);\r\n            await this.actualPriceFunction(result, this.DiscountDetails);\r\n        });\r\n    }\r\n    createImgPath(serverpath) {\r\n        return GlobalConstants.apiURL + serverpath;\r\n    }\r\n    async getDiscountFunction(result) {\r\n        await this.DiscountsService.GetById(result.discountId).subscribe(res => {\r\n            this.DiscountDetails = res;\r\n        });\r\n    }\r\n    async actualPriceFunction(result, productDiscount) {\r\n        this.actualProductPrice = Number(result.price) + Number(productDiscount.value);\r\n    }\r\n    async onAddToCart(formValues) {\r\n        this.submitted = true;\r\n        if (this.cartForm.invalid) {\r\n            return;\r\n        }\r\n        const formValue = Object.assign({}, formValues);\r\n        var productDetail = new InModel();\r\n        productDetail.In.quantity = formValue.quantity;\r\n        productDetail.In.productId = this.ProductDetails.id;\r\n        productDetail.In.userId = Number(localStorage.getItem('userId'));\r\n        productDetail.In.isAvailable = true;\r\n        this.CartService.add(productDetail).subscribe({\r\n            next: (_) => {\r\n                document.getElementById(\"success-alert\").style.display = \"block\";\r\n                document.getElementById(\"danger-alert\").style.display = \"none\";\r\n                document.getElementById(\"success-alert\").innerHTML = \"added successfully\";\r\n                this.router.navigate(['/cart']);\r\n            },\r\n            error: (err) => {\r\n                document.getElementById(\"danger-alert\").style.display = \"block\";\r\n                document.getElementById(\"danger-alert\").innerHTML = \"something went wrong\";\r\n            }\r\n        });\r\n    }\r\n    ngOnInit() {\r\n        this.route.paramMap.subscribe(params => {\r\n            var id = Number(params.get('id'));\r\n            this.getById(id);\r\n        });\r\n    }\r\n};\r\nProductsingleComponent = __decorate([\r\n    Component({\r\n        selector: 'app-productsingle',\r\n        templateUrl: './productsingle.component.html',\r\n        styleUrls: ['./productsingle.component.css']\r\n    })\r\n], ProductsingleComponent);\r\nexport { ProductsingleComponent };\r\nclass InModel {\r\n    constructor() {\r\n        this.In = new CartModel();\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}