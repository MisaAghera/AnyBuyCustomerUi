{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\R9\\\\Desktop\\\\AnyBuyStoreAngularUi\\\\AnyBuyStoreUi\\\\AnyBuyStoreUi\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { CartModel } from '../shared/models/cart-model.model';\nimport { OrderDetailsModel } from '../shared/models/order-details-model';\nimport { OrderModel } from '../shared/models/order-model';\nimport { ProductQuantity } from '../shared/models/product-quantity';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../shared/services/cart.service\";\nimport * as i2 from \"../shared/services/order-details.service\";\nimport * as i3 from \"../shared/services/order.service\";\nimport * as i4 from \"../shared/services/products.service\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"../cart-card/cart-card.component\";\nimport * as i9 from \"../edit-address/edit-address.component\";\n\nfunction CartComponent_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 28)(1, \"app-cart-card\", 29);\n    i0.ɵɵlistener(\"productChange\", function CartComponent_div_27_Template_app_cart_card_productChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return ctx_r2.addItem($event);\n    });\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const product_r1 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"product\", product_r1);\n  }\n}\n\nexport class CartComponent {\n  constructor(CartService, OrderDetailsService, OrderService, ProductService, router) {\n    this.CartService = CartService;\n    this.OrderDetailsService = OrderDetailsService;\n    this.OrderService = OrderService;\n    this.ProductService = ProductService;\n    this.router = router;\n    this.cartProducts = [];\n    this.OrderDetailsList = [];\n    this.orderId = 0;\n    this.addressId = 0;\n    this.totalPrice = 0;\n    this.userId = Number(localStorage.getItem('userId')) ? Number(localStorage.getItem('userId')) : 0;\n  }\n\n  getAddressIdFromChild(addressId) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.addressId = addressId;\n    })();\n  }\n\n  cancelOrder() {\n    this.OrderService.delete(this.orderId).subscribe(res => {\n      alert(\"order cancelled\");\n    });\n  }\n\n  createOrder() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      var order = new InOrderModel();\n      order.In.userId = Number(localStorage.getItem(\"userId\"));\n      order.In.addressId = _this2.addressId;\n\n      _this2.OrderService.add(order).subscribe( /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(function* (res) {\n          _this2.orderId = res;\n          yield _this2.addOrderDetailsToOrder(_this2.orderId);\n          yield _this2.updateTotalPriceAndDeleteFromCart();\n        });\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    })();\n  }\n\n  getAllCartProducts() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this3.CartService.getAllByUserId(_this3.userId).subscribe( /*#__PURE__*/function () {\n        var _ref2 = _asyncToGenerator(function* (res) {\n          _this3.cartList = res;\n        });\n\n        return function (_x2) {\n          return _ref2.apply(this, arguments);\n        };\n      }());\n    })();\n  }\n\n  addItem(newItem) {\n    this.cartProducts.push(newItem);\n  }\n\n  onClickOrderPlace() {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      if (_this4.addressId == 0) {\n        alert(\"please add address before placing the order\");\n      } else {\n        let orderId = _this4.createOrder();\n      }\n    })();\n  }\n\n  onClickDisplayAddressPanel() {\n    var _this5 = this;\n\n    return _asyncToGenerator(function* () {\n      var _a;\n\n      if (((_a = _this5.cartList) === null || _a === void 0 ? void 0 : _a.length) != 0) {\n        document.getElementById(\"editAddressPanel\").style.display = \"block\";\n        document.getElementById(\"cancelOrder\").style.display = \"block\";\n        document.getElementById(\"    checkout\").style.display = \"block\";\n\n        for (let cartItem of _this5.cartList) {\n          var cartDetails = new InCartModel();\n          cartDetails.In.id = cartItem.id;\n          cartDetails.In.quantity = Math.min(cartItem.quantity, cartItem.actualProductQuantity);\n          cartDetails.In.userId = Number(localStorage.getItem('userId'));\n          cartDetails.In.productId = cartItem.productId;\n          cartDetails.In.isAvailable = true;\n\n          _this5.CartService.update(cartDetails).subscribe({\n            next: _ => {\n              console.log(\"updated success\");\n            },\n            error: err => {\n              console.log(\"error\");\n            }\n          });\n        }\n      }\n    })();\n  }\n\n  updateTotalPriceAndDeleteFromCart() {\n    this.OrderService.getById(this.orderId).subscribe(res => {\n      let order = new InOrderModel();\n      order.In.addressId = res.addressId;\n      order.In.id = res.id;\n      order.In.totalAmount = this.totalPrice;\n      order.In.userId = res.userId;\n      this.OrderService.update(order).subscribe( /*#__PURE__*/function () {\n        var _ref3 = _asyncToGenerator(function* (res) {});\n\n        return function (_x3) {\n          return _ref3.apply(this, arguments);\n        };\n      }());\n      var userId = Number(localStorage.getItem('userId'));\n      this.CartService.deleteFromUserId(userId).subscribe();\n      this.OrderDetailsService.getAllByOrderId(this.orderId).subscribe(res => {\n        for (let orderDetail of res) {\n          debugger;\n          let orederQuantity = orderDetail.quantity;\n          console.log(orederQuantity);\n          this.ProductService.getById(orderDetail.productId).subscribe(res => {\n            var updateModel = new InUpdateProductmodel();\n            updateModel.In.id = res.id;\n            updateModel.In.quantity = res.quantity - orederQuantity;\n            this.ProductService.updateQuantity(updateModel).subscribe();\n          });\n        }\n      });\n    });\n    this.router.navigate(['/order/' + this.orderId]);\n  }\n\n  addOrderDetailsToOrder(orderId) {\n    var _this6 = this;\n\n    return _asyncToGenerator(function* () {\n      debugger;\n      console.log(_this6.cartList);\n\n      for (let cartItem of _this6.cartList) {\n        _this6.totalPrice += cartItem.productPrice * cartItem.quantity;\n        let orderDetails = yield _this6.createOrderDetailsModel(cartItem, orderId);\n        yield _this6.ProductService.getById(cartItem.productId).subscribe( /*#__PURE__*/function () {\n          var _ref4 = _asyncToGenerator(function* (res) {\n            if (res.discountId) {\n              orderDetails.In.discountId = res.discountId;\n            }\n\n            yield _this6.OrderDetailsService.add(orderDetails).subscribe({\n              next: res => {\n                console.log(\"added success\");\n              },\n              error: err => {\n                console.log(\"error\");\n              }\n            });\n          });\n\n          return function (_x4) {\n            return _ref4.apply(this, arguments);\n          };\n        }());\n      }\n    })();\n  }\n\n  createOrderDetailsModel(cartItem, orderId) {\n    return _asyncToGenerator(function* () {\n      debugger;\n      var orderDetails = new InOrderDetailsModel();\n      orderDetails.In.orderId = orderId;\n      orderDetails.In.productId = cartItem.productId;\n      orderDetails.In.status = 'preparing';\n      orderDetails.In.quantity = cartItem.quantity;\n      return orderDetails;\n    })();\n  }\n\n  ngOnInit() {\n    var _this7 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this7.getAllCartProducts();\n    })();\n  }\n\n}\n\nCartComponent.ɵfac = function CartComponent_Factory(t) {\n  return new (t || CartComponent)(i0.ɵɵdirectiveInject(i1.CartService), i0.ɵɵdirectiveInject(i2.OrderDetailsService), i0.ɵɵdirectiveInject(i3.OrderService), i0.ɵɵdirectiveInject(i4.ProductService), i0.ɵɵdirectiveInject(i5.Router));\n};\n\nCartComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CartComponent,\n  selectors: [[\"app-cart\"]],\n  decls: 40,\n  vars: 1,\n  consts: [[1, \"page-header\"], [1, \"overly\"], [1, \"container\"], [1, \"row\", \"justify-content-center\"], [1, \"col-lg-6\"], [1, \"content\", \"text-center\"], [1, \"mb-3\"], [1, \"cart\", \"shopping\", \"page-wrapper\"], [1, \"container\", \"mt-5\"], [1, \"col-lg-12\"], [1, \"product-list\"], [1, \"cart-form\"], [\"cellspacing\", \"0\", 1, \"table\", \"shop_table\", \"shop_table_responsive\", \"cart\"], [1, \"row\"], [1, \"product-thumbnail\", \"col-sm-2\"], [1, \"product-name\", \"col-sm-2\"], [1, \"product-price\", \"col-sm-2\"], [1, \"product-quantity\", \"col-sm-2\"], [1, \"product-subtotal\", \"col-sm-2\"], [1, \"product-remove\", \"col-sm-1\"], [\"class\", \"cart_item\", 4, \"ngFor\", \"ngForOf\"], [1, \"cart-summary\"], [1, \"text-center\", \"cart-buttons\", \"mt-3\"], [\"id\", \"checkout\", 1, \"btn\", \"btn-small\", \"btn-main\", \"btn-block\", 3, \"click\"], [\"id\", \"cancelOrder\", 1, \"btn\", \"btn-small\", \"btn-main\", \"btn-block\", 2, \"display\", \"none\", 3, \"click\"], [\"id\", \"editAddressPanel\"], [3, \"sendAddressIdEvent\"], [1, \"btn\", \"btn-small\", \"btn-main\", \"btn-block\", 3, \"click\"], [1, \"cart_item\"], [3, \"product\", \"productChange\"]],\n  template: function CartComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"section\", 0);\n      i0.ɵɵelement(1, \"div\", 1);\n      i0.ɵɵelementStart(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5)(6, \"h1\", 6);\n      i0.ɵɵtext(7, \"Cart\");\n      i0.ɵɵelementEnd()()()()()();\n      i0.ɵɵelementStart(8, \"section\", 7)(9, \"div\", 8)(10, \"div\", 3)(11, \"div\", 9)(12, \"div\", 10)(13, \"form\", 11)(14, \"div\", 12)(15, \"div\", 13);\n      i0.ɵɵelement(16, \"div\", 14);\n      i0.ɵɵelementStart(17, \"div\", 15);\n      i0.ɵɵtext(18, \"Product\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"div\", 16);\n      i0.ɵɵtext(20, \"Price\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"div\", 17);\n      i0.ɵɵtext(22, \"Quantity\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(23, \"div\", 18);\n      i0.ɵɵtext(24, \"Total\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(25, \"div\", 19)(26, \"hr\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(27, CartComponent_div_27_Template, 2, 1, \"div\", 20);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(28, \"div\", 21)(29, \"div\", 22)(30, \"a\", 23);\n      i0.ɵɵlistener(\"click\", function CartComponent_Template_a_click_30_listener() {\n        return ctx.onClickDisplayAddressPanel();\n      });\n      i0.ɵɵtext(31, \"checkout\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(32, \"div\", 22)(33, \"a\", 24);\n      i0.ɵɵlistener(\"click\", function CartComponent_Template_a_click_33_listener() {\n        return ctx.cancelOrder();\n      });\n      i0.ɵɵtext(34, \"Cancel Order\");\n      i0.ɵɵelementEnd()()()()()()()()();\n      i0.ɵɵelementStart(35, \"div\", 25)(36, \"app-edit-address\", 26);\n      i0.ɵɵlistener(\"sendAddressIdEvent\", function CartComponent_Template_app_edit_address_sendAddressIdEvent_36_listener($event) {\n        return ctx.getAddressIdFromChild($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(37, \"div\", 22)(38, \"a\", 27);\n      i0.ɵɵlistener(\"click\", function CartComponent_Template_a_click_38_listener() {\n        return ctx.onClickOrderPlace();\n      });\n      i0.ɵɵtext(39, \"place order\");\n      i0.ɵɵelementEnd()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(27);\n      i0.ɵɵproperty(\"ngForOf\", ctx.cartList);\n    }\n  },\n  directives: [i6.ɵNgNoValidate, i6.NgControlStatusGroup, i6.NgForm, i7.NgForOf, i8.CartCardComponent, i9.EditAddressComponent],\n  styles: [\"#editAddressPanel[_ngcontent-%COMP%]{\\r\\n    display: none;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhcnQuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGFBQWE7QUFDakIiLCJmaWxlIjoiY2FydC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiI2VkaXRBZGRyZXNzUGFuZWx7XHJcbiAgICBkaXNwbGF5OiBub25lO1xyXG59Il19 */\"]\n});\n\nclass InOrderModel {\n  constructor() {\n    this.In = new OrderModel();\n  }\n\n}\n\nclass InOrderDetailsModel {\n  constructor() {\n    this.In = new OrderDetailsModel();\n  }\n\n}\n\nclass InCartModel {\n  constructor() {\n    this.In = new CartModel();\n  }\n\n}\n\nclass InUpdateProductmodel {\n  constructor() {\n    this.In = new ProductQuantity();\n  }\n\n}","map":{"version":3,"sources":["C:/Users/R9/Desktop/AnyBuyStoreAngularUi/AnyBuyStoreUi/AnyBuyStoreUi/src/app/cart/cart.component.ts"],"names":["CartModel","OrderDetailsModel","OrderModel","ProductQuantity","i0","i1","i2","i3","i4","i5","i6","i7","i8","i9","CartComponent_div_27_Template","rf","ctx","_r3","ɵɵgetCurrentView","ɵɵelementStart","ɵɵlistener","CartComponent_div_27_Template_app_cart_card_productChange_1_listener","$event","ɵɵrestoreView","ctx_r2","ɵɵnextContext","addItem","ɵɵelementEnd","product_r1","$implicit","ɵɵadvance","ɵɵproperty","CartComponent","constructor","CartService","OrderDetailsService","OrderService","ProductService","router","cartProducts","OrderDetailsList","orderId","addressId","totalPrice","userId","Number","localStorage","getItem","getAddressIdFromChild","cancelOrder","delete","subscribe","res","alert","createOrder","order","InOrderModel","In","add","addOrderDetailsToOrder","updateTotalPriceAndDeleteFromCart","getAllCartProducts","getAllByUserId","cartList","newItem","push","onClickOrderPlace","onClickDisplayAddressPanel","_a","length","document","getElementById","style","display","cartItem","cartDetails","InCartModel","id","quantity","Math","min","actualProductQuantity","productId","isAvailable","update","next","_","console","log","error","err","getById","totalAmount","deleteFromUserId","getAllByOrderId","orderDetail","orederQuantity","updateModel","InUpdateProductmodel","updateQuantity","navigate","productPrice","orderDetails","createOrderDetailsModel","discountId","InOrderDetailsModel","status","ngOnInit","ɵfac","CartComponent_Factory","t","ɵɵdirectiveInject","Router","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","CartComponent_Template","ɵɵelement","ɵɵtext","ɵɵtemplate","CartComponent_Template_a_click_30_listener","CartComponent_Template_a_click_33_listener","CartComponent_Template_app_edit_address_sendAddressIdEvent_36_listener","CartComponent_Template_a_click_38_listener","directives","ɵNgNoValidate","NgControlStatusGroup","NgForm","NgForOf","CartCardComponent","EditAddressComponent","styles"],"mappings":"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","sourcesContent":["import { CartModel } from '../shared/models/cart-model.model';\r\nimport { OrderDetailsModel } from '../shared/models/order-details-model';\r\nimport { OrderModel } from '../shared/models/order-model';\r\nimport { ProductQuantity } from '../shared/models/product-quantity';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"../shared/services/cart.service\";\r\nimport * as i2 from \"../shared/services/order-details.service\";\r\nimport * as i3 from \"../shared/services/order.service\";\r\nimport * as i4 from \"../shared/services/products.service\";\r\nimport * as i5 from \"@angular/router\";\r\nimport * as i6 from \"@angular/forms\";\r\nimport * as i7 from \"@angular/common\";\r\nimport * as i8 from \"../cart-card/cart-card.component\";\r\nimport * as i9 from \"../edit-address/edit-address.component\";\r\nfunction CartComponent_div_27_Template(rf, ctx) { if (rf & 1) {\r\n    const _r3 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"div\", 28)(1, \"app-cart-card\", 29);\r\n    i0.ɵɵlistener(\"productChange\", function CartComponent_div_27_Template_app_cart_card_productChange_1_listener($event) { i0.ɵɵrestoreView(_r3); const ctx_r2 = i0.ɵɵnextContext(); return ctx_r2.addItem($event); });\r\n    i0.ɵɵelementEnd()();\r\n} if (rf & 2) {\r\n    const product_r1 = ctx.$implicit;\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"product\", product_r1);\r\n} }\r\nexport class CartComponent {\r\n    constructor(CartService, OrderDetailsService, OrderService, ProductService, router) {\r\n        this.CartService = CartService;\r\n        this.OrderDetailsService = OrderDetailsService;\r\n        this.OrderService = OrderService;\r\n        this.ProductService = ProductService;\r\n        this.router = router;\r\n        this.cartProducts = [];\r\n        this.OrderDetailsList = [];\r\n        this.orderId = 0;\r\n        this.addressId = 0;\r\n        this.totalPrice = 0;\r\n        this.userId = Number(localStorage.getItem('userId')) ? Number(localStorage.getItem('userId')) : 0;\r\n    }\r\n    async getAddressIdFromChild(addressId) {\r\n        this.addressId = addressId;\r\n    }\r\n    cancelOrder() {\r\n        this.OrderService.delete(this.orderId).subscribe(res => {\r\n            alert(\"order cancelled\");\r\n        });\r\n    }\r\n    async createOrder() {\r\n        var order = new InOrderModel();\r\n        order.In.userId = Number(localStorage.getItem(\"userId\"));\r\n        order.In.addressId = this.addressId;\r\n        this.OrderService.add(order).subscribe(async (res) => {\r\n            this.orderId = res;\r\n            await this.addOrderDetailsToOrder(this.orderId);\r\n            await this.updateTotalPriceAndDeleteFromCart();\r\n        });\r\n    }\r\n    async getAllCartProducts() {\r\n        await this.CartService.getAllByUserId(this.userId).subscribe(async (res) => {\r\n            this.cartList = res;\r\n        });\r\n    }\r\n    addItem(newItem) {\r\n        this.cartProducts.push(newItem);\r\n    }\r\n    async onClickOrderPlace() {\r\n        if (this.addressId == 0) {\r\n            alert(\"please add address before placing the order\");\r\n        }\r\n        else {\r\n            let orderId = this.createOrder();\r\n        }\r\n    }\r\n    async onClickDisplayAddressPanel() {\r\n        var _a;\r\n        if (((_a = this.cartList) === null || _a === void 0 ? void 0 : _a.length) != 0) {\r\n            document.getElementById(\"editAddressPanel\").style.display = \"block\";\r\n            document.getElementById(\"cancelOrder\").style.display = \"block\";\r\n            document.getElementById(\"    checkout\").style.display = \"block\";\r\n            for (let cartItem of this.cartList) {\r\n                var cartDetails = new InCartModel();\r\n                cartDetails.In.id = cartItem.id;\r\n                cartDetails.In.quantity = Math.min(cartItem.quantity, cartItem.actualProductQuantity);\r\n                cartDetails.In.userId = Number(localStorage.getItem('userId'));\r\n                cartDetails.In.productId = cartItem.productId;\r\n                cartDetails.In.isAvailable = true;\r\n                this.CartService.update(cartDetails).subscribe({\r\n                    next: (_) => {\r\n                        console.log(\"updated success\");\r\n                    },\r\n                    error: (err) => {\r\n                        console.log(\"error\");\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n    updateTotalPriceAndDeleteFromCart() {\r\n        this.OrderService.getById(this.orderId).subscribe(res => {\r\n            let order = new InOrderModel();\r\n            order.In.addressId = res.addressId;\r\n            order.In.id = res.id;\r\n            order.In.totalAmount = this.totalPrice;\r\n            order.In.userId = res.userId;\r\n            this.OrderService.update(order).subscribe(async (res) => {\r\n            });\r\n            var userId = Number(localStorage.getItem('userId'));\r\n            this.CartService.deleteFromUserId(userId).subscribe();\r\n            this.OrderDetailsService.getAllByOrderId(this.orderId).subscribe(res => {\r\n                for (let orderDetail of res) {\r\n                    debugger;\r\n                    let orederQuantity = orderDetail.quantity;\r\n                    console.log(orederQuantity);\r\n                    this.ProductService.getById(orderDetail.productId).subscribe(res => {\r\n                        var updateModel = new InUpdateProductmodel();\r\n                        updateModel.In.id = res.id;\r\n                        updateModel.In.quantity = res.quantity - orederQuantity;\r\n                        this.ProductService.updateQuantity(updateModel).subscribe();\r\n                    });\r\n                }\r\n            });\r\n        });\r\n        this.router.navigate(['/order/' + this.orderId]);\r\n    }\r\n    async addOrderDetailsToOrder(orderId) {\r\n        debugger;\r\n        console.log(this.cartList);\r\n        for (let cartItem of this.cartList) {\r\n            this.totalPrice += cartItem.productPrice * cartItem.quantity;\r\n            let orderDetails = await this.createOrderDetailsModel(cartItem, orderId);\r\n            await this.ProductService.getById(cartItem.productId).subscribe(async (res) => {\r\n                if (res.discountId) {\r\n                    orderDetails.In.discountId = res.discountId;\r\n                }\r\n                await this.OrderDetailsService.add(orderDetails).subscribe({\r\n                    next: (res) => {\r\n                        console.log(\"added success\");\r\n                    },\r\n                    error: (err) => {\r\n                        console.log(\"error\");\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    }\r\n    async createOrderDetailsModel(cartItem, orderId) {\r\n        debugger;\r\n        var orderDetails = new InOrderDetailsModel();\r\n        orderDetails.In.orderId = orderId;\r\n        orderDetails.In.productId = cartItem.productId;\r\n        orderDetails.In.status = 'preparing';\r\n        orderDetails.In.quantity = cartItem.quantity;\r\n        return orderDetails;\r\n    }\r\n    async ngOnInit() {\r\n        await this.getAllCartProducts();\r\n    }\r\n}\r\nCartComponent.ɵfac = function CartComponent_Factory(t) { return new (t || CartComponent)(i0.ɵɵdirectiveInject(i1.CartService), i0.ɵɵdirectiveInject(i2.OrderDetailsService), i0.ɵɵdirectiveInject(i3.OrderService), i0.ɵɵdirectiveInject(i4.ProductService), i0.ɵɵdirectiveInject(i5.Router)); };\r\nCartComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: CartComponent, selectors: [[\"app-cart\"]], decls: 40, vars: 1, consts: [[1, \"page-header\"], [1, \"overly\"], [1, \"container\"], [1, \"row\", \"justify-content-center\"], [1, \"col-lg-6\"], [1, \"content\", \"text-center\"], [1, \"mb-3\"], [1, \"cart\", \"shopping\", \"page-wrapper\"], [1, \"container\", \"mt-5\"], [1, \"col-lg-12\"], [1, \"product-list\"], [1, \"cart-form\"], [\"cellspacing\", \"0\", 1, \"table\", \"shop_table\", \"shop_table_responsive\", \"cart\"], [1, \"row\"], [1, \"product-thumbnail\", \"col-sm-2\"], [1, \"product-name\", \"col-sm-2\"], [1, \"product-price\", \"col-sm-2\"], [1, \"product-quantity\", \"col-sm-2\"], [1, \"product-subtotal\", \"col-sm-2\"], [1, \"product-remove\", \"col-sm-1\"], [\"class\", \"cart_item\", 4, \"ngFor\", \"ngForOf\"], [1, \"cart-summary\"], [1, \"text-center\", \"cart-buttons\", \"mt-3\"], [\"id\", \"checkout\", 1, \"btn\", \"btn-small\", \"btn-main\", \"btn-block\", 3, \"click\"], [\"id\", \"cancelOrder\", 1, \"btn\", \"btn-small\", \"btn-main\", \"btn-block\", 2, \"display\", \"none\", 3, \"click\"], [\"id\", \"editAddressPanel\"], [3, \"sendAddressIdEvent\"], [1, \"btn\", \"btn-small\", \"btn-main\", \"btn-block\", 3, \"click\"], [1, \"cart_item\"], [3, \"product\", \"productChange\"]], template: function CartComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"section\", 0);\r\n        i0.ɵɵelement(1, \"div\", 1);\r\n        i0.ɵɵelementStart(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5)(6, \"h1\", 6);\r\n        i0.ɵɵtext(7, \"Cart\");\r\n        i0.ɵɵelementEnd()()()()()();\r\n        i0.ɵɵelementStart(8, \"section\", 7)(9, \"div\", 8)(10, \"div\", 3)(11, \"div\", 9)(12, \"div\", 10)(13, \"form\", 11)(14, \"div\", 12)(15, \"div\", 13);\r\n        i0.ɵɵelement(16, \"div\", 14);\r\n        i0.ɵɵelementStart(17, \"div\", 15);\r\n        i0.ɵɵtext(18, \"Product\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(19, \"div\", 16);\r\n        i0.ɵɵtext(20, \"Price\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(21, \"div\", 17);\r\n        i0.ɵɵtext(22, \"Quantity\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(23, \"div\", 18);\r\n        i0.ɵɵtext(24, \"Total\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelement(25, \"div\", 19)(26, \"hr\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵtemplate(27, CartComponent_div_27_Template, 2, 1, \"div\", 20);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(28, \"div\", 21)(29, \"div\", 22)(30, \"a\", 23);\r\n        i0.ɵɵlistener(\"click\", function CartComponent_Template_a_click_30_listener() { return ctx.onClickDisplayAddressPanel(); });\r\n        i0.ɵɵtext(31, \"checkout\");\r\n        i0.ɵɵelementEnd()();\r\n        i0.ɵɵelementStart(32, \"div\", 22)(33, \"a\", 24);\r\n        i0.ɵɵlistener(\"click\", function CartComponent_Template_a_click_33_listener() { return ctx.cancelOrder(); });\r\n        i0.ɵɵtext(34, \"Cancel Order\");\r\n        i0.ɵɵelementEnd()()()()()()()()();\r\n        i0.ɵɵelementStart(35, \"div\", 25)(36, \"app-edit-address\", 26);\r\n        i0.ɵɵlistener(\"sendAddressIdEvent\", function CartComponent_Template_app_edit_address_sendAddressIdEvent_36_listener($event) { return ctx.getAddressIdFromChild($event); });\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(37, \"div\", 22)(38, \"a\", 27);\r\n        i0.ɵɵlistener(\"click\", function CartComponent_Template_a_click_38_listener() { return ctx.onClickOrderPlace(); });\r\n        i0.ɵɵtext(39, \"place order\");\r\n        i0.ɵɵelementEnd()()();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(27);\r\n        i0.ɵɵproperty(\"ngForOf\", ctx.cartList);\r\n    } }, directives: [i6.ɵNgNoValidate, i6.NgControlStatusGroup, i6.NgForm, i7.NgForOf, i8.CartCardComponent, i9.EditAddressComponent], styles: [\"#editAddressPanel[_ngcontent-%COMP%]{\\r\\n    display: none;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhcnQuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGFBQWE7QUFDakIiLCJmaWxlIjoiY2FydC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiI2VkaXRBZGRyZXNzUGFuZWx7XHJcbiAgICBkaXNwbGF5OiBub25lO1xyXG59Il19 */\"] });\r\nclass InOrderModel {\r\n    constructor() {\r\n        this.In = new OrderModel();\r\n    }\r\n}\r\nclass InOrderDetailsModel {\r\n    constructor() {\r\n        this.In = new OrderDetailsModel();\r\n    }\r\n}\r\nclass InCartModel {\r\n    constructor() {\r\n        this.In = new CartModel();\r\n    }\r\n}\r\nclass InUpdateProductmodel {\r\n    constructor() {\r\n        this.In = new ProductQuantity();\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}